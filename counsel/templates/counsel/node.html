{% load counsel_extras %}

<div class="row">
  <div class="col-sm-2">
    <p>{% if question %}
         {% if not question.anonymous %}
           {{ question.user.username }}
         {% else %}anonymous
         {% endif %}
       {% else %}
         {% if not answer.anonymous %}
           {{ answer.user.username }}
         {% else %}
           anonymous
         {% endif %}
       {% endif %}<br>
       {% if question %}{{ question.date }}{% else %}{{ answer.date }}{% endif %}
    </p>
  </div>
  <div class="col-sm-10">
    <div class="chat-area">
      <div class="main">
        {% if question %}
          {{ question.content }}
        {% else %}
          {{ answer.content }}
        {% endif %}
      </div>
    </div>
    {% if answer %}
    <a class="button special small" id="good_button{{ answer.id }}">Good +{{ answer|count_good_rators }}</a>
    <a class="button special small" id="bad_button{{ answer.id }}">Bad</a>
    {% endif %}

    {% ifequal answer.user user %}
    <!-- Trigger the modal with a button -->
    <button type="button" class="button special small" data-toggle="modal" data-target="#myModal">Edit</button>

    <!-- Modal -->
    <div id="myModal" class="modal fade" role="dialog">
      <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">Post a answer</h4>
          </div>
          <div class="modal-body">
                {% post_answer_form answer.question.id %}
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>

      </div>
    </div>
    {% endifequal %}

  </div>
</div>
